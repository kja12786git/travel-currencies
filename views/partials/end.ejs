<script type="text/javascript">
const logs = console.log;
// set currency calculator return

/* define from currency, to currency, and amount
 using native vanJS... but this ajax does need jQuery */

// object with arrs to store data & results
const stored = {
  amountres: [],
  prevres: [],

}

// object w/ DOM selects
const sel = {
  amount: document.getElementById("amount"),

  amountre: document.getElementById("amount-alt"),

  from: document.getElementById('from'),

  to: document.getElementById('to')

}

// trigger the call after the user inputs all related data
sel.amount.onfocus = () => {
  logs(`inputting... `);

    this.onchange = () => {
    let amount = sel.amount.value;
//    let to = sel.to.value;
//    let from = sel.from.value;
    logs(`value changed to ${amount}. ${to} is to & ${from} is from.`);

      if ((amount != null) && (from != null) && (to != undefined)) {

        currency();

        // to set return on the DOM
        sel.amountre.value = toString(amountres[0]);

      } //end if check for set values

    }

}

const currency = (to, from) => {
  // set endpoint and your access key
  let endpoint = 'convert';
  let access_key = '19b3253e311dac1b4eb26daef9c1c988';

  // execute the conversion using the "convert" endpoint
          $.ajax({
//            url: 'http://apilayer.net/api/' + endpoint + '?access_key=' + access_key +'&from=' + from + '&to=' + to + '&amount=' + amount,
              url: `http://apilayer.net/api/live?access_key=${access_key}`,
              dataType: 'jsonp',
              success: function(json) {
                  // access the conversion result in json.result
                  logs(json.quotes);
//                  stored.prevres.push(amountres[0]);
//                  stored.amountres.pop();
//                  stored.amountres.push(json.result);

              }
          }) //end ajax call

}

// update ajax call with setInterval
setInterval(currency, 10000);

</script>

</body>
</html>
